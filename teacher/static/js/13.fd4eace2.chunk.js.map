{"version":3,"sources":["components/TopLoading/index.tsx","pages/Schedule/styles.module.scss","constants/time.ts","utils/time.ts","store/schedule/selectors.ts","assets/icons/trial.svg","assets/icons/jit.svg","assets/icons/minus.svg","store/teacher/selectors.ts","pages/Schedule/index.tsx"],"names":["TopLoading","loading","ref","useRef","useEffect","current","continuousStart","complete","color","memo","module","exports","TimeInMs","secToHHMM","val","defaultVal","h","Math","floor","m","addZero","getTimePoints","offset","nightTeacher","points","points2","midnightPoint","sec","max","step","push","timestamp","str","length","concat","getHotTimePoints","getHalfPriorityTimePoints","start","end","getScheduleInfo","state","schedule","_extends","Object","assign","target","i","arguments","source","key","prototype","hasOwnProperty","call","apply","this","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","_ref2","fillRule","clipRule","d","fill","SvgTrial","_ref","svgRef","title","titleId","props","width","height","viewBox","xmlns","id","ForwardRef","SvgJit","stroke","strokeWidth","SvgMinus","teacherSelector","teacher","cx","classnames","bind","styles","defaultSelectedInfo","onlySlots","onlyEmpty","lastSelected","oneOfKlassesIsJit","jit","disabledSelected","Schedule","dispatch","useDispatch","useState","Date","currentDate","setCurrentDate","selectedPoints","setSelectedPoints","selectedInfo","setSelectedInfo","pointsWithClass","setPointsWithClass","weekDays","setWeekDays","teacherWeeklySlots","setTeacherWeeklySlots","hotTimePoints","halfPriorityTimePoints","halfPriorityTimePointsWeekEnd","allPoints","setAllPoints","pointsWithRescheduledClass","setPointsWithRescheduledClass","pointsWithClassesHistory","setPointsWithClassesHistory","useSelector","weeklySlots","classes","classesHistory","operationWithSlotsIsSuccess","userInfo","userSelector","info","teacherInfo","getData","useCallback","schedulePending","teacherClassesParams","start_time__gte","toJSON","start_time__lt","historyClassesParams","status","newPoints","klass","start_time","getTime","newHistoryPoints","newPointsWithRescheduledClass","history","ts","updated","class_info","rescheduled_to_datetime","now","UTC","getUTCFullYear","getUTCMonth","getUTCDate","firstDay","getUTCDay","days","date","index","month","isoweekday","getWeekDays","timezone_offset","has_unlimited_schedule_hours","slots","teacherSlots","slot","time","split","getTeacherWeeklySlots","formatDate","pattern","format","utcToZonedTime","timezone","getRegionCode","regionCode","isClassFailed","day","point","result","student_id","action_type","handleSelectSlot","isDisabled","isSelected","newSelectedInfo","selectedTs","parseInt","newSelectedPoints","allJit","stand_by","getStyle","isWeekly","selected","disabled","hot","halfHot","halfHotWeekEnd","single","weekly","getSelectedSlotsTimes","selectedTimes","handleDeleteSlot","operateSlots","action","handleCreateSlot","changeJit","getActionPopup","klassHistory","rescheduledClass","fullClassInfo","rescheduledToDatetime","rescheduledFromDatetime","student","_embedded","sourceOfFail","reasonOfFail","reason_of_fail","source_of_fail","source_of_action","className","onClick","event","stopPropagation","lesson","full_name","region_code","name","capitalizeFirstLetter","original_teacher_id","lesson_need_redo","in_trial","is_trial","active","getSlotContent","isTrial","jitActive","nextSixWeeks","Helmet","Container","type","newDate","map","getDate"],"mappings":"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","file":"static/js/13.fd4eace2.chunk.js","sourcesContent":["import React, {\n  useRef,\n  useEffect,\n  FC,\n  memo,\n} from 'react';\nimport LoadingBar from 'react-top-loading-bar';\n\ninterface LoadingBarProps {\n  continuousStart: () => void;\n  complete: () => void;\n}\n\ninterface PropsType {\n  loading: boolean;\n}\n\nconst TopLoading: FC<PropsType> = ({ loading }) => {\n  const ref = useRef<HTMLDivElement & LoadingBarProps | null>(null);\n\n  const handleContinuousStart = () => {\n    if (ref.current) ref.current.continuousStart();\n  };\n\n  const handleComplete = () => {\n    if (ref.current) ref.current.complete();\n  };\n\n  useEffect(() => {\n    if (loading) {\n      handleContinuousStart();\n    } else {\n      handleComplete();\n    }\n  }, [loading]);\n\n  return <LoadingBar color=\"#f6bb3d\" ref={ref} />;\n};\n\nexport default memo(TopLoading);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"currentWeekContainer\":\"Schedule_currentWeekContainer_1vDfp\",\"currentWeek\":\"Schedule_currentWeek_I5qFp\",\"arrows\":\"Schedule_arrows_IraQW\",\"right\":\"Schedule_right_3mlSN\",\"slotColorInfo\":\"Schedule_slotColorInfo_tLyWE\",\"weeklySlot\":\"Schedule_weeklySlot_3MsZG\",\"singleSlot\":\"Schedule_singleSlot_1zySe\",\"justInTime\":\"Schedule_justInTime_32N6F\",\"priorityTime\":\"Schedule_priorityTime_S_F8h\",\"halfPriorityTime\":\"Schedule_halfPriorityTime_1TMLJ\",\"divider\":\"Schedule_divider_3bwYV\",\"slotHeader\":\"Schedule_slotHeader_2o6ed\",\"slots\":\"Schedule_slots_16eiQ\",\"selected\":\"Schedule_selected_1AD-_\",\"slot\":\"Schedule_slot_9qZKD\",\"disabled\":\"Schedule_disabled_14uM3\",\"single\":\"Schedule_single_3G-Ma\",\"weekly\":\"Schedule_weekly_2GXDX\",\"halfHotWeekEnd\":\"Schedule_halfHotWeekEnd_HPMnR\",\"halfHot\":\"Schedule_halfHot_h953V\",\"badStatus\":\"Schedule_badStatus_10cN-\",\"wrong\":\"Schedule_wrong_3awHL\",\"hot\":\"Schedule_hot_2sLXV\",\"slotInfo\":\"Schedule_slotInfo_1ntPp\",\"jitStatus\":\"Schedule_jitStatus_29Si-\",\"active\":\"Schedule_active_2vI6L\",\"trial\":\"Schedule_trial_35z4h\",\"studentId\":\"Schedule_studentId_1DoQW\",\"studentName\":\"Schedule_studentName_2H6gq\",\"actionPopup\":\"Schedule_actionPopup_2HegT\",\"date\":\"Schedule_date_1IqGf\",\"lessonName\":\"Schedule_lessonName_22yLH\",\"popupSlotInfo\":\"Schedule_popupSlotInfo_1LGhp\",\"additionalStatuses\":\"Schedule_additionalStatuses_mo2F1\",\"jit\":\"Schedule_jit_1mQf_\",\"create\":\"Schedule_create_OAZy6\",\"delete\":\"Schedule_delete_2b7g2\"};","// time in milliseconds\nexport const TimeInMs = {\n  second: 1000,\n  minute: 1000 * 60,\n  hour: 1000 * 60 * 60,\n  day: 1000 * 60 * 60 * 24,\n  week: 1000 * 60 * 60 * 24 * 7,\n  month: 1000 * 60 * 60 * 24 * 30,\n};\n","import { TimeInMs } from 'constants/time';\nimport { CurrentUserType, PointType, WeeklySlotType } from 'types/common';\nimport { TeacherWeeklySlotsType, WeekDayType } from 'types/scheduleType';\nimport { addZero } from './helpers';\n\nexport const getLocalTimeOffsetByDate = (\n  sourceDate: Date | string,\n  user: CurrentUserType,\n): number => {\n  const offsetInfo = user.timezone_offset_info || {};\n  let offset = user.timezone_offset || user.timezone_local_offset;\n\n  const date = new Date(sourceDate).getTime();\n\n  if (offsetInfo.next && date > offsetInfo.next.start_interval_timestamp) {\n    offset = offsetInfo.next.offset_in_minutes;\n  }\n\n  if (offsetInfo.current && offsetInfo.next && date < offsetInfo.next.start_interval_timestamp) {\n    offset = offsetInfo.current.offset_in_minutes;\n  }\n\n  if (\n    offsetInfo.previous\n    && offsetInfo.current\n    && date < offsetInfo.current.start_interval_timestamp) {\n    offset = offsetInfo.previous.offset_in_minutes;\n  }\n\n  if (\n    offsetInfo.previous\n    && offsetInfo.current\n    && date < offsetInfo.previous.start_interval_timestamp) {\n    offset = offsetInfo.current.offset_in_minutes;\n  }\n\n  return offset;\n};\n\nexport const secToHHMM = (val = 0, defaultVal?: string): string => {\n  if (val <= 0) {\n    return defaultVal || '--:--';\n  }\n\n  const h = Math.floor(val / 60 / 60);\n  const m = Math.floor((val - h * 60 * 60) / 60);\n  // const s = val - h * 60 * 60 - m * 60;\n\n  return `${addZero(h)}:${addZero(m)}`;\n};\n\nexport const getTimePoints = (offset = 0, nightTeacher: boolean): PointType[] => {\n  const points: PointType[] = [];\n  const points2: PointType[] = [];\n  const midnightPoint = 24 * 60 * 60;\n  let sec: number = (4 * 60 + offset) * 60;\n  let max = (21 * 60 + 30 + offset) * 60;\n  const step = 30 * 60;\n\n  if (nightTeacher) {\n    sec = 0;\n    max = 23.5 * 60 * 60;\n  } else {\n    sec = sec < 0 ? (midnightPoint + sec) : sec;\n    max = max > midnightPoint ? (max - midnightPoint) : max;\n  }\n\n  if (sec > max) {\n    while (sec < midnightPoint) {\n      points2.push({\n        timestamp: sec * 1000,\n        str: secToHHMM(sec),\n      });\n      sec += step;\n    }\n    sec = 0;\n  }\n\n  while (sec <= max) {\n    points.push({\n      timestamp: sec * 1000,\n      str: secToHHMM(sec, '00:00'),\n    });\n    sec += step;\n  }\n\n  return points2 && points2.length > 0 ? points.concat(points2) : points;\n};\n\nexport const getWeekDays = (now = new Date(), offset = 0): WeekDayType[] => {\n  const currentDate = new Date(Date.UTC(now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()));\n  const firstDay = new Date(Date.UTC(\n    currentDate.getUTCFullYear(),\n    currentDate.getUTCMonth(),\n    currentDate.getUTCDate() - currentDate.getUTCDay() + 1,\n  ));\n\n  const days: WeekDayType[] = [];\n\n  for (let i = 0; i < 7; i += 1) {\n    const date = new Date(\n      Date.UTC(\n        firstDay.getUTCFullYear(),\n        firstDay.getUTCMonth(),\n        firstDay.getUTCDate() + i,\n      ) - offset * TimeInMs.minute,\n    );\n\n    days.push({\n      index: i,\n      date,\n      timestamp: date.getTime(),\n      month: date.getUTCMonth(),\n      isoweekday: date.getUTCDay() + 1,\n    });\n  }\n\n  return days;\n};\n\nexport const getTeacherWeeklySlots = (\n  slots: WeeklySlotType[],\n  offset: number,\n): TeacherWeeklySlotsType | null => {\n  if (!slots.length) {\n    return null;\n  }\n\n  const teacherSlots: TeacherWeeklySlotsType = {};\n\n  for (const slot of slots) {\n    const time = slot.start_time;\n    const { isoweekday } = slot;\n    const [h, m] = time.split(':');\n    const sec = (+h * 60 + offset) * 60 + +m * 60;\n\n    teacherSlots[isoweekday] = teacherSlots[isoweekday] || {};\n    teacherSlots[isoweekday][sec * 1000] = true;\n  }\n\n  return teacherSlots;\n};\n\nexport const getHotTimePoints = (offset: number): { [index: string]: boolean } => {\n  const points = {};\n  const midnightPoint = 24 * 60 * 60;\n  let sec = (14 * 60 + offset) * 60 + 30 * 60;\n  let max = (17 * 60 + offset) * 60 + 30 * 60;\n  const step = 30 * 60;\n\n  sec = sec < 0 ? (midnightPoint + sec) : sec;\n  max = max > midnightPoint ? (max - midnightPoint) : max;\n\n  if (sec > max) {\n    while (sec < midnightPoint) {\n      points[sec * 1000] = true;\n      sec += step;\n    }\n    sec = 0;\n  }\n\n  while (sec <= max) {\n    points[sec * 1000] = true;\n    sec += step;\n  }\n\n  return points;\n};\n\nexport const getHalfPriorityTimePoints = (\n  offset: number,\n  start: number,\n  end: number,\n): { [index: string]: boolean } => {\n  const points = {};\n  const midnightPoint = 24 * 60 * 60;\n  let sec = (start * 60 + offset) * 60 + 30 * 60;\n  let max = (end * 60 + offset) * 60 + 30 * 60;\n  const step = 30 * 60;\n\n  sec = sec < 0 ? (midnightPoint + sec) : sec;\n  max = max > midnightPoint ? (max - midnightPoint) : max;\n\n  if (sec > max) {\n    while (sec < midnightPoint) {\n      points[sec * 1000] = true;\n      sec += step;\n    }\n    sec = 0;\n  }\n\n  while (sec <= max) {\n    points[sec * 1000] = true;\n    sec += step;\n  }\n\n  return points;\n};\n","import { AppStateType } from 'types';\nimport { ScheduleState } from 'types/scheduleType';\n\nexport const getLibraryInfoLoading = (state: AppStateType): boolean => (\n  state.schedule.weeklySlotsLoading\n  || state.schedule.classesLoading\n);\n\nexport const getScheduleInfo = (state: AppStateType): ScheduleState => state.schedule;\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  fillRule: \"evenodd\",\n  clipRule: \"evenodd\",\n  d: \"M8.335 16.67C12.9383 16.67 16.67 12.9383 16.67 8.335C16.67 3.73171 12.9383 0 8.335 0C3.73171 0 0 3.73171 0 8.335C0 12.9383 3.73171 16.67 8.335 16.67ZM5.001 5.8345V4.1675L11.669 4.1675V5.8345H9.1685V12.5025H7.5015V5.8345H5.001Z\",\n  fill: \"#42AAC8\"\n});\n\nfunction SvgTrial(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 17,\n    height: 17,\n    viewBox: \"0 0 17 17\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgTrial);\nexport default __webpack_public_path__ + \"static/media/trial.4664fa73.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M4.29736 0H6.20166V6.39844C6.20166 6.98665 6.07048 7.50716 5.80811 7.95996C5.54997 8.40853 5.18392 8.75553 4.70996 9.00098C4.236 9.24642 3.70068 9.36914 3.104 9.36914C2.12646 9.36914 1.36475 9.12158 0.818848 8.62646C0.272949 8.12712 0 7.42253 0 6.5127H1.91699C1.91699 6.96549 2.01221 7.2998 2.20264 7.51562C2.39307 7.73145 2.69352 7.83936 3.104 7.83936C3.46794 7.83936 3.75781 7.71452 3.97363 7.46484C4.18945 7.21517 4.29736 6.8597 4.29736 6.39844V0Z\",\n  fill: \"white\"\n});\n\nfunction SvgJit(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 7,\n    height: 10,\n    viewBox: \"0 0 7 10\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgJit);\nexport default __webpack_public_path__ + \"static/media/jit.ee1be64f.svg\";\nexport { ForwardRef as ReactComponent };","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10 1H0\",\n  stroke: \"white\",\n  strokeWidth: 2\n});\n\nfunction SvgMinus(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, [\"title\", \"titleId\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 10,\n    height: 2,\n    viewBox: \"0 0 10 2\",\n    fill: \"none\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _ref2);\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgMinus);\nexport default __webpack_public_path__ + \"static/media/minus.3577dcb3.svg\";\nexport { ForwardRef as ReactComponent };","import { AppStateType } from 'types';\nimport TeacherState from 'types/teacherType';\n\nexport const teacherSelector = (state: AppStateType): TeacherState => state.teacher;\n","import React, {\n  FC,\n  useState,\n  useEffect,\n  useCallback,\n  SyntheticEvent,\n} from 'react';\nimport classnames from 'classnames/bind';\nimport { Helmet } from 'react-helmet';\nimport { useSelector, useDispatch } from 'react-redux';\n\nimport TopLoading from 'components/TopLoading';\nimport Container from 'components/Container';\nimport { MdChevronLeft, MdChevronRight } from 'react-icons/md';\nimport {\n  ClassType,\n  ClassHistoryType,\n  PointType,\n  TeacherType,\n} from 'types/common';\nimport format from 'date-fns/format';\nimport { utcToZonedTime } from 'date-fns-tz';\n\nimport {\n  getTimePoints,\n  getWeekDays,\n  getTeacherWeeklySlots,\n  getHotTimePoints,\n  getHalfPriorityTimePoints,\n} from 'utils/time';\nimport { capitalizeFirstLetter } from 'utils/helpers';\nimport { schedulePending, operateSlots } from 'store/schedule/actions';\nimport { getScheduleInfo } from 'store/schedule/selectors';\nimport { TimeInMs } from 'constants/time';\nimport { ReactComponent as TrialIcon } from 'assets/icons/trial.svg';\nimport { ReactComponent as JitIcon } from 'assets/icons/jit.svg';\nimport { ReactComponent as MinusIcon } from 'assets/icons/minus.svg';\nimport { TeacherWeeklySlotsType, WeekDayType } from 'types/scheduleType';\nimport { userSelector } from 'store/user/selectors';\nimport { teacherSelector } from 'store/teacher/selectors';\nimport styles from './styles.module.scss';\n\nconst cx = classnames.bind(styles);\n\nconst getPoints = (offset: number, teacher: TeacherType) => {\n  return {\n    points: getTimePoints(offset, teacher.has_unlimited_schedule_hours),\n    hotTimePoints: getHotTimePoints(offset),\n    halfPriorityTimePoints: {\n      ...getHalfPriorityTimePoints(offset, 12, 14),\n      ...getHalfPriorityTimePoints(offset, 17, 18),\n    },\n    halfPriorityTimePointsWeekEnd: getHalfPriorityTimePoints(offset, 14, 17),\n  };\n};\n\ninterface SelectedInfoType {\n  length: number,\n  onlySlots: boolean,\n  onlyEmpty: boolean,\n  lastSelected: null | number,\n  oneOfKlassesIsJit: boolean,\n  jit: boolean,\n  disabledSelected: boolean,\n}\n\nconst defaultSelectedInfo: SelectedInfoType = {\n  length: 0,\n  onlySlots: false,\n  onlyEmpty: false,\n  lastSelected: null,\n  oneOfKlassesIsJit: false,\n  jit: false,\n  disabledSelected: false,\n};\n\ninterface PointsWithClassType {\n  [index: string]: ClassType,\n}\n\ninterface PointsWithClassHistoryType {\n  [index: string]: ClassHistoryType,\n}\n\ninterface SelectedPointsType {\n  [index: string]: {\n    day: WeekDayType,\n    point: PointType,\n  },\n}\n\ninterface AllPointsType {\n  points: PointType[],\n  hotTimePoints: { [index: string]: boolean },\n  halfPriorityTimePoints: { [index: string]: boolean },\n  halfPriorityTimePointsWeekEnd: { [index: string]: boolean },\n}\n\nconst Schedule: FC = () => {\n  const dispatch = useDispatch();\n  const [currentDate, setCurrentDate] = useState(new Date());\n  const [selectedPoints, setSelectedPoints] = useState<SelectedPointsType>({});\n  const [selectedInfo, setSelectedInfo] = useState<SelectedInfoType>(defaultSelectedInfo);\n  const [pointsWithClass, setPointsWithClass] = useState<PointsWithClassType>({});\n  const [weekDays, setWeekDays] = useState<WeekDayType[] | null>(null);\n  const [teacherWeeklySlots, setTeacherWeeklySlots] = useState<TeacherWeeklySlotsType | null>(null);\n  const [allPoints, setAllPoints] = useState<AllPointsType>({\n    points: [],\n    hotTimePoints: {},\n    halfPriorityTimePoints: {},\n    halfPriorityTimePointsWeekEnd: {},\n  });\n\n  const [\n    pointsWithRescheduledClass,\n    setPointsWithRescheduledClass,\n  ] = useState<PointsWithClassHistoryType>({});\n\n  const [\n    pointsWithClassesHistory,\n    setPointsWithClassesHistory,\n  ] = useState<PointsWithClassHistoryType>({});\n\n  const {\n    weeklySlots,\n    classes,\n    classesHistory,\n    operationWithSlotsIsSuccess,\n  } = useSelector(getScheduleInfo);\n\n  const {\n    info: userInfo,\n  } = useSelector(userSelector);\n\n  const {\n    info: teacherInfo,\n  } = useSelector(teacherSelector);\n\n  const getData = useCallback(\n    () => {\n      if (weekDays) {\n        dispatch(schedulePending({\n          teacherClassesParams: {\n            start_time__gte: new Date(weekDays[0].timestamp).toJSON(),\n            start_time__lt: new Date(weekDays[0].timestamp + TimeInMs.week).toJSON(),\n          },\n          historyClassesParams: {\n            status: ['scheduled', 'ongoing', 'done', 'stopped'],\n            start_time__gte: new Date(weekDays[0].timestamp - TimeInMs.week).toJSON(),\n            start_time__lt: new Date(weekDays[0].timestamp + TimeInMs.week).toJSON(),\n          },\n        }));\n\n        setSelectedInfo(defaultSelectedInfo);\n        setSelectedPoints({});\n      }\n    },\n    [dispatch, weekDays],\n  );\n\n  useEffect(() => {\n    getData();\n  }, [currentDate, weekDays]);\n\n  useEffect(() => {\n    if (operationWithSlotsIsSuccess) {\n      getData();\n    }\n  }, [operationWithSlotsIsSuccess]);\n\n  useEffect(() => {\n    const newPoints = {};\n\n    for (const klass of classes) {\n      const ts = new Date(klass.start_time).getTime();\n      newPoints[ts] = klass;\n    }\n\n    setPointsWithClass(newPoints);\n  }, [classes]);\n\n  useEffect(() => {\n    const newHistoryPoints: PointsWithClassHistoryType = {};\n    const newPointsWithRescheduledClass: PointsWithClassHistoryType = {};\n\n    for (const history of classesHistory) {\n      const ts = new Date(history.start_time).getTime();\n\n      if (!newHistoryPoints[ts]\n         || new Date(history.updated).getTime() > new Date(newHistoryPoints[ts].updated).getTime()\n      ) {\n        newHistoryPoints[ts] = history;\n      }\n\n      if (history.class_info?.rescheduled_to_datetime) {\n        const rescheduledTs = new Date(history.class_info.rescheduled_to_datetime).getTime();\n        newPointsWithRescheduledClass[rescheduledTs] = history;\n      }\n    }\n\n    setPointsWithClassesHistory(newHistoryPoints);\n    setPointsWithRescheduledClass(newPointsWithRescheduledClass);\n  }, [classesHistory]);\n\n  useEffect(() => {\n    if (currentDate && userInfo) {\n      setWeekDays(\n        getWeekDays(currentDate, userInfo.timezone_offset),\n      );\n    }\n  }, [currentDate, userInfo]);\n\n  useEffect(() => {\n    if (userInfo && teacherInfo) {\n      setAllPoints(\n        getPoints(userInfo.timezone_offset, teacherInfo),\n      );\n    }\n  }, [userInfo, teacherInfo]);\n\n  useEffect(() => {\n    if (weeklySlots && userInfo) {\n      setTeacherWeeklySlots(\n        getTeacherWeeklySlots(weeklySlots, userInfo.timezone_offset),\n      );\n    }\n  }, [weeklySlots, userInfo]);\n\n  const {\n    points,\n    hotTimePoints,\n    halfPriorityTimePoints,\n    halfPriorityTimePointsWeekEnd,\n  } = allPoints;\n\n  const formatDate = (date, pattern = 'ccc, dd.MM hh:mm a') => {\n    if (!date || !userInfo) {\n      return null;\n    }\n\n    return format(\n      utcToZonedTime(new Date(date), userInfo.timezone),\n      pattern,\n    );\n  };\n\n  const getRegionCode = (regionCode: string): string => {\n    return regionCode === 'GLOBAL' ? 'GL' : regionCode;\n  };\n\n  const isClassFailed = (day: WeekDayType, point: PointType) => {\n    const ts = day.timestamp + point.timestamp;\n\n    const klass = pointsWithClass[ts];\n    const history = pointsWithClassesHistory[ts];\n\n    if (klass && klass.result === 'failed' && klass.student_id !== null) {\n      return true;\n    }\n\n    if (history && (history.action_type === 'canceled' || history.action_type === 'deleted')) {\n      return true;\n    }\n\n    return false;\n  };\n\n  const goToNextWeek = () => () => {\n    const newDate = new Date(currentDate.getTime() + TimeInMs.week);\n    setCurrentDate(newDate);\n  };\n\n  const goToPrevWeek = () => () => {\n    const newDate = new Date(currentDate.getTime() - TimeInMs.week);\n    setCurrentDate(newDate);\n  };\n\n  const handleSelectSlot = (day: WeekDayType, point: PointType) => () => {\n    const ts = day.timestamp + point.timestamp;\n    const isDisabled = new Date().getTime() > ts;\n\n    if (isDisabled && !isClassFailed(day, point)) {\n      return;\n    }\n\n    const isSelected = selectedPoints[ts];\n\n    const newSelectedInfo = {\n      length: 0,\n      onlySlots: true,\n      onlyEmpty: true,\n      lastSelected: selectedInfo.lastSelected,\n      jit: false,\n      oneOfKlassesIsJit: false,\n      disabledSelected: isDisabled,\n    };\n\n    if (!isSelected) {\n      newSelectedInfo.lastSelected = ts;\n    } else if (selectedInfo.lastSelected === ts) {\n      let lastSelected: number | null = null;\n\n      for (const key in selectedPoints) {\n        const selectedTs = parseInt(key, 10);\n\n        if (selectedPoints[selectedTs] && selectedTs !== newSelectedInfo.lastSelected) {\n          lastSelected = selectedTs;\n          break;\n        }\n      }\n\n      newSelectedInfo.lastSelected = lastSelected;\n    }\n\n    const newSelectedPoints = { ...selectedPoints };\n\n    if (isSelected) {\n      delete newSelectedPoints[ts];\n    } else {\n      newSelectedPoints[ts] = { day, point };\n    }\n\n    let allJit = true;\n\n    for (const key in newSelectedPoints) {\n      newSelectedInfo.length += 1;\n\n      if (new Date().getTime() > +key) {\n        newSelectedInfo.disabledSelected = true;\n      }\n\n      if (pointsWithClass[key]) {\n        newSelectedInfo.onlyEmpty = false;\n\n        if (pointsWithClass[key].stand_by) {\n          newSelectedInfo.oneOfKlassesIsJit = true;\n        } else {\n          allJit = false;\n        }\n      } else {\n        newSelectedInfo.onlySlots = false;\n      }\n    }\n\n    if (newSelectedInfo.onlySlots && allJit) {\n      newSelectedInfo.jit = true;\n    }\n\n    if (newSelectedInfo.onlyEmpty) {\n      newSelectedInfo.jit = false;\n    }\n\n    if (!newSelectedInfo.length) {\n      newSelectedInfo.onlyEmpty = false;\n      newSelectedInfo.onlySlots = false;\n    }\n\n    setSelectedPoints(newSelectedPoints);\n    setSelectedInfo(newSelectedInfo);\n  };\n\n  const getStyle = (day: WeekDayType, point: PointType) => {\n    const ts = day.timestamp + point.timestamp;\n    const isWeekly = teacherWeeklySlots && teacherWeeklySlots[day.isoweekday][point.timestamp];\n    const klass = pointsWithClass[ts];\n\n    return ['slot', {\n      selected: selectedPoints[day.timestamp + point.timestamp],\n      disabled: new Date().getTime() > day.timestamp + point.timestamp,\n      hot: hotTimePoints[point.timestamp] && day.isoweekday <= 6,\n      halfHot: halfPriorityTimePoints[point.timestamp] && day.isoweekday <= 6,\n      halfHotWeekEnd: halfPriorityTimePointsWeekEnd[point.timestamp] && day.isoweekday === 7,\n      single: klass && !isWeekly,\n      weekly: isWeekly && klass,\n    }];\n  };\n\n  const getSelectedSlotsTimes = (): string[] => {\n    const selectedTimes: string[] = [];\n\n    for (const ts in selectedPoints) {\n      selectedTimes.push(\n        new Date(parseInt(ts, 10)).toJSON(),\n      );\n    }\n\n    return selectedTimes;\n  };\n\n  const handleDeleteSlot = (weekly: boolean) => () => {\n    dispatch(operateSlots({\n      action: 'delete',\n      stand_by: false,\n      start_time: getSelectedSlotsTimes(),\n      weekly,\n    }));\n  };\n\n  const handleCreateSlot = (weekly: boolean) => () => {\n    dispatch(operateSlots({\n      action: 'create',\n      stand_by: selectedInfo.jit,\n      start_time: getSelectedSlotsTimes(),\n      weekly,\n    }));\n  };\n\n  const changeJit = (time: string | string[], status: boolean, weekly = false) => {\n    dispatch(operateSlots({\n      action: 'change_jit_status',\n      stand_by: status,\n      start_time: time,\n      weekly,\n    }));\n  };\n\n  const getActionPopup = (day: WeekDayType, point: PointType) => {\n    const ts = day.timestamp + point.timestamp;\n    const klass: ClassType = pointsWithClass[ts];\n    const klassHistory = pointsWithClassesHistory[ts];\n    const rescheduledClass: ClassHistoryType = pointsWithRescheduledClass[ts];\n    const fullClassInfo = { ...klassHistory, ...klass };\n    const isDisabled = new Date().getTime() > ts;\n\n    const rescheduledToDatetime = rescheduledClass?.class_info?.rescheduled_to_datetime;\n    const rescheduledFromDatetime = rescheduledClass?.start_time;\n    const student = klass?._embedded.student || klassHistory?._embedded.student;\n\n    if (selectedInfo.disabledSelected && selectedInfo.length > 1) {\n      return null;\n    }\n\n    let result: string | null = null;\n    let sourceOfFail: string | null = null;\n    let reasonOfFail: string | null = null;\n\n    if (rescheduledClass) {\n      result = rescheduledClass.reason_of_fail || rescheduledClass.action_type;\n      sourceOfFail = rescheduledClass.source_of_fail || rescheduledClass.source_of_action;\n      reasonOfFail = rescheduledClass.reason_of_fail;\n    } else if (fullClassInfo) {\n      result = fullClassInfo.reason_of_fail || fullClassInfo.action_type;\n      sourceOfFail = fullClassInfo.source_of_fail || fullClassInfo.source_of_action;\n      reasonOfFail = fullClassInfo.reason_of_fail;\n    }\n\n    const handleClick = (event: SyntheticEvent) => {\n      event.stopPropagation();\n    };\n\n    const handleClickOnJitFromDeletePopup = () => {\n      let jit = true;\n\n      if (selectedInfo.jit) {\n        jit = false;\n      }\n\n      if (!selectedInfo.jit && selectedInfo.oneOfKlassesIsJit) {\n        jit = false;\n      }\n\n      changeJit(getSelectedSlotsTimes(), jit);\n    };\n\n    const toggleJitStatusChange = () => {\n      setSelectedInfo({\n        ...selectedInfo,\n        jit: !selectedInfo.jit,\n      });\n    };\n\n    return (\n      <div className={cx('actionPopup')} onClick={handleClick}>\n        {selectedInfo.length === 1 && (\n          <div className={cx('pointDate')}>\n            {formatDate(ts)}\n          </div>\n        )}\n        {selectedInfo.length === 1 && fullClassInfo && (\n          <div className={cx('popupSlotInfo')}>\n            <div className={cx('lessonName')}>\n              {fullClassInfo._embedded?.lesson?.full_name}\n            </div>\n            {student && (\n              <div className={cx('student')}>\n                <span>{`${student.id} ${getRegionCode(student.region_code)} `}</span>\n                <span>\n                  (\n                  {student.name}\n                  )\n                </span>\n              </div>\n            )}\n            {result && (\n              <>\n                {!(rescheduledToDatetime || rescheduledFromDatetime) && (\n                  <div className={cx('result')}>\n                    {capitalizeFirstLetter(result)}\n                    {' '}\n                    <span className={cx('resultDate')}>\n                      {formatDate(fullClassInfo.updated)}\n                    </span>\n                    {' by '}\n                    <span className={cx('resultSource')}>{sourceOfFail || reasonOfFail}</span>\n                  </div>\n                )}\n                {rescheduledToDatetime && (\n                  <div className={cx('result')}>\n                    Rescheduled to\n                    <span className={cx('resultDate')}>\n                      {formatDate(rescheduledToDatetime)}\n                    </span>\n                    by\n                    <span className={cx('resultSource')}>{sourceOfFail || reasonOfFail}</span>\n                  </div>\n                )}\n                {rescheduledFromDatetime && (\n                  <div className={cx('result')}>\n                    Rescheduled from\n                    <span className={cx('resultDate')}>\n                      {formatDate(rescheduledFromDatetime)}\n                    </span>\n                    by\n                    <span className={cx('resultSource')}>{sourceOfFail || reasonOfFail}</span>\n                  </div>\n                )}\n              </>\n            )}\n            <div className={cx('additionalStatuses')}>\n              {fullClassInfo.original_teacher_id && (\n                <span>Substitution</span>\n              )}\n              {fullClassInfo.lesson_need_redo && (\n                <span>Class redo</span>\n              )}\n              {(student?.in_trial || fullClassInfo.is_trial) && (\n                <span>Trial lesson</span>\n              )}\n            </div>\n          </div>\n        )}\n\n        {!isDisabled && (\n          <>\n            {selectedInfo.onlySlots && (\n            <div className={cx('delete')}>\n              <button onClick={handleDeleteSlot(false)}>Delete this week</button>\n              <button onClick={handleDeleteSlot(true)}>Delete this week & future week</button>\n              <div className={cx('jit')} onClick={handleClickOnJitFromDeletePopup}>\n                <div className={cx('jitStatus', { active: selectedInfo.jit || selectedInfo.oneOfKlassesIsJit })}>\n                  {selectedInfo.jit && <JitIcon />}\n                  {!selectedInfo.jit && selectedInfo.oneOfKlassesIsJit && <MinusIcon />}\n                </div>\n                Just in time class\n              </div>\n            </div>\n            )}\n            {selectedInfo.onlyEmpty && (\n            <div className={cx('create')}>\n              <button onClick={handleCreateSlot(false)}>Create single slot</button>\n              <button onClick={handleCreateSlot(true)}>Create weekly slot</button>\n              <div className={cx('jit')} onClick={toggleJitStatusChange}>\n                <div className={cx('jitStatus', { active: selectedInfo.jit })}>\n                  {selectedInfo.jit && <JitIcon />}\n                </div>\n                Just in time class\n              </div>\n            </div>\n            )}\n          </>\n        )}\n      </div>\n    );\n  };\n\n  const getSlotContent = (day: WeekDayType, point: PointType) => {\n    const ts: number = day.timestamp + point.timestamp;\n    const klass = pointsWithClass[ts];\n    const isTrial = klass && (klass.is_trial || klass._embedded?.student?.in_trial);\n    const jitActive = klass?.stand_by;\n    const student = klass?._embedded?.student;\n\n    const handleClickOnJit = (event: SyntheticEvent) => {\n      event.stopPropagation();\n\n      changeJit(new Date(ts).toJSON(), !klass.stand_by);\n    };\n\n    if (klass) {\n      return (\n        <div className={cx('slotInfo')}>\n          <div onClick={handleClickOnJit} className={cx('jitStatus', { active: jitActive })}>\n            {jitActive && <JitIcon />}\n          </div>\n          {student && (\n            <div className={cx('studentInfo')}>\n              <div className={cx('studentId')}>\n                #\n                {student.id}\n                {' '}\n                {getRegionCode(student.region_code)}\n              </div>\n              <div className={cx('studentName')}>{student.name}</div>\n            </div>\n          )}\n          {isTrial && <div className={cx('trial')}><TrialIcon /></div>}\n          {isClassFailed(day, point) && <div className={cx('badStatus')} />}\n        </div>\n      );\n    }\n\n    return null;\n  };\n\n  const nextSixWeeks = new Date().getTime() + TimeInMs.week * 6;\n\n  if (!weekDays) {\n    return null;\n  }\n\n  return (\n    <>\n      <Helmet>\n        <title>Novakid - Schedule</title>\n      </Helmet>\n      <TopLoading loading={false} />\n      <div className={cx('schedule')}>\n        <Container>\n          <div className={cx('header')}>\n            <div className={cx('currentWeekContainer')}>\n              <div className={cx('arrows')}>\n                <button\n                  type=\"button\"\n                  className={cx('left')}\n                  onClick={goToPrevWeek()}\n                >\n                  <MdChevronLeft />\n                </button>\n                <button\n                  type=\"button\"\n                  className={cx('right')}\n                  onClick={goToNextWeek()}\n                  disabled={weekDays[weekDays.length - 1].date.getTime() > nextSixWeeks}\n                >\n                  <MdChevronRight />\n                </button>\n              </div>\n              <div className={cx('currentWeek')}>\n                {formatDate(weekDays[0].date, 'dd.MM')}\n                {'  '}\n                {formatDate(weekDays[weekDays.length - 1].date, 'dd.MM yyyy')}\n              </div>\n            </div>\n            <div className={cx('slotColorInfo')}>\n              <div className={cx('weeklySlot')}>\n                <span />\n                Weekly slot\n              </div>\n              <div className={cx('singleSlot')}>\n                <span />\n                Single slot\n              </div>\n              <div className={cx('justInTime')}>\n                <span className={cx('jitStatus', 'active')}>\n                  <JitIcon />\n                </span>\n                Just in time\n              </div>\n              <div className={cx('divider')} />\n              <div className={cx('priorityTime')}>\n                <span />\n                Priority time\n              </div>\n              <div className={cx('halfPriorityTime')}>\n                <span />\n                Half-priority time\n              </div>\n            </div>\n            <table className={cx('slotHeader')}>\n              <thead>\n                <tr>\n                  <th>Time</th>\n                  {weekDays.map((day) => (\n                    <th key={day.date.getDate()}>\n                      {formatDate(day.date, 'ccc, dd.MM')}\n                    </th>\n                  ))}\n                </tr>\n              </thead>\n            </table>\n          </div>\n          <table className={cx('slots')}>\n            <tbody>\n              {points.map((point) => (\n                <tr key={point.timestamp}>\n                  <td>{point.str}</td>\n                  {weekDays.map((day) => (\n                    <td\n                      key={day.date.getDate()}\n                      className={cx(getStyle(day, point))}\n                      onClick={handleSelectSlot(day, point)}\n                    >\n                      {getSlotContent(day, point)}\n                      {(selectedInfo.onlyEmpty || selectedInfo.onlySlots)\n                      && selectedInfo.lastSelected === (day.timestamp + point.timestamp) && (\n                        getActionPopup(day, point)\n                      )}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </Container>\n      </div>\n    </>\n  );\n};\n\nexport default Schedule;\n"],"sourceRoot":""}